<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script>

    let socket = {};
    let token = "";

    function login(userName, password) {

      let cred = {userName:userName,password:password};

      $.post('localhost:8080/api/login', cred)
        .done((response) => {

          console.log('login successful!\n');
          token = response.token;
          initSocket();
        })
        .fail((xhr, status, err) => {
          console.log(xhr);
          console.log(status);
          console.log(err);
        });
    }
    function registerForClasses() {
      socket.emit('subscribe-to-class-channels');
    }
    function initSocket(){
      socket = io.connect('localhost:8080/?token=' + token);
    }

    function togglePresentation(presentationId, state) {
      socket.emit('toggle-presentation',presentationId,state);
    }

    function toggleSlide(slideId, state) {
      socket.emit('toggle-slide',slideId,state);
    }
    function registerListeners() {

      socket.on('slide-active', (slideId)=>{
        console.log('SlideID[%d] active',slideId)
      });

      socket.on('presentation-active', (presentationId)=>{
        console.log('presentationID[%d] active', presentationId);
      });

      socket.on('error', (error)=>{
        console.log('ERR: ' + error);
      });
    }
</script>
</body>
</html>
